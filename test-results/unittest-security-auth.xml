<?xml version="1.0" encoding="utf-8"?><testsuites name="pytest tests"><testsuite name="pytest" errors="0" failures="5" skipped="0" tests="47" time="3.237" timestamp="2025-08-07T12:25:49.560144-04:00" hostname="Mac.lan"><testcase classname="test_security.TestAPIKeyValidator" name="test_load_db_token_success" time="0.018" /><testcase classname="test_security.TestAPIKeyValidator" name="test_load_db_token_missing" time="0.000" /><testcase classname="test_security.TestAPIKeyValidator" name="test_mask_token" time="0.000" /><testcase classname="test_security.TestAPIKeyValidator" name="test_mask_token_short" time="0.000" /><testcase classname="test_security.TestAPIKeyValidator" name="test_validate_api_key_valid" time="0.000" /><testcase classname="test_security.TestAPIKeyValidator" name="test_validate_api_key_invalid" time="0.000" /><testcase classname="test_security.TestAPIKeyValidator" name="test_validate_api_key_timing_attack_protection" time="0.000" /><testcase classname="test_security.TestAPIKeyValidator" name="test_log_auth_attempt" time="0.001" /><testcase classname="test_security.TestAPIKeyDecorator" name="test_require_api_key_valid_bearer_token" time="0.002" /><testcase classname="test_security.TestAPIKeyDecorator" name="test_require_api_key_valid_x_api_key" time="0.001" /><testcase classname="test_security.TestAPIKeyDecorator" name="test_require_api_key_missing_header" time="0.001" /><testcase classname="test_security.TestAPIKeyDecorator" name="test_require_api_key_invalid_token" time="0.001" /><testcase classname="test_security.TestAPIKeyDecorator" name="test_require_api_key_malformed_bearer" time="0.001" /><testcase classname="test_security.TestAPIKeyDecorator" name="test_api_key_stored_in_g" time="0.001" /><testcase classname="test_security.TestRateLimiting" name="test_rate_limit_within_limits" time="0.001" /><testcase classname="test_security.TestRateLimiting" name="test_rate_limit_exceeded" time="0.001" /><testcase classname="test_security.TestRateLimiting" name="test_check_rate_limit_function" time="0.000" /><testcase classname="test_security.TestRateLimiting" name="test_rate_limit_parsing" time="0.000" /><testcase classname="test_security.TestRateLimiting" name="test_rate_limit_cleanup" time="0.001" /><testcase classname="test_security.TestSecuritySetup" name="test_setup_security" time="0.001" /><testcase classname="test_security.TestSecuritySetup" name="test_security_health_check_healthy" time="0.000" /><testcase classname="test_security.TestSecuritySetup" name="test_security_health_check_unhealthy" time="0.000" /><testcase classname="test_security.TestHelperFunctions" name="test_get_api_key_from_request_bearer" time="0.000" /><testcase classname="test_security.TestHelperFunctions" name="test_get_api_key_from_request_x_api_key" time="0.000" /><testcase classname="test_security.TestHelperFunctions" name="test_get_api_key_from_request_none" time="0.000" /><testcase classname="test_security.TestHelperFunctions" name="test_get_api_key_from_request_bearer_priority" time="0.000" /><testcase classname="test_security.TestIntegration" name="test_auth_and_rate_limit_success" time="0.001" /><testcase classname="test_security.TestIntegration" name="test_auth_fails_before_rate_limit" time="0.001" /><testcase classname="test_security.TestIntegration" name="test_rate_limit_after_auth_success" time="0.001" /><testcase classname="unit.test_api_endpoints_auth.TestAPIEndpointsAuthentication" name="test_health_endpoints_no_auth_required" time="0.053" /><testcase classname="unit.test_api_endpoints_auth.TestAPIEndpointsAuthentication" name="test_protected_endpoints_require_auth" time="0.009" /><testcase classname="unit.test_api_endpoints_auth.TestAPIEndpointsAuthentication" name="test_bearer_token_authentication" time="0.010"><failure message="assert 401 != 401&#10; +  where 401 = &lt;WrapperTestResponse streamed [401 UNAUTHORIZED]&gt;.status_code">tests/unit/test_api_endpoints_auth.py:110: in test_bearer_token_authentication
    assert response.status_code != 401
E   assert 401 != 401
E    +  where 401 = &lt;WrapperTestResponse streamed [401 UNAUTHORIZED]&gt;.status_code</failure></testcase><testcase classname="unit.test_api_endpoints_auth.TestAPIEndpointsAuthentication" name="test_x_api_key_authentication" time="0.008"><failure message="assert 401 != 401&#10; +  where 401 = &lt;WrapperTestResponse streamed [401 UNAUTHORIZED]&gt;.status_code">tests/unit/test_api_endpoints_auth.py:127: in test_x_api_key_authentication
    assert response.status_code != 401
E   assert 401 != 401
E    +  where 401 = &lt;WrapperTestResponse streamed [401 UNAUTHORIZED]&gt;.status_code</failure></testcase><testcase classname="unit.test_api_endpoints_auth.TestAPIEndpointsAuthentication" name="test_invalid_api_key_rejection" time="0.008" /><testcase classname="unit.test_api_endpoints_auth.TestAPIEndpointsAuthentication" name="test_malformed_auth_header_rejection" time="0.008" /><testcase classname="unit.test_api_endpoints_auth.TestAPIEndpointsRateLimiting" name="test_rate_limiting_enforced" time="0.532"><failure message="assert (429 in {401} or False)&#10; +  where False = all(&lt;generator object TestAPIEndpointsRateLimiting.test_rate_limiting_enforced.&lt;locals&gt;.&lt;genexpr&gt; at 0x11d5f8860&gt;)">tests/unit/test_api_endpoints_auth.py:210: in test_rate_limiting_enforced
    assert 429 in status_codes or all(code in [200, 202] for code in status_codes)
E   assert (429 in {401} or False)
E    +  where False = all(&lt;generator object TestAPIEndpointsRateLimiting.test_rate_limiting_enforced.&lt;locals&gt;.&lt;genexpr&gt; at 0x11d5f8860&gt;)</failure></testcase><testcase classname="unit.test_api_endpoints_auth.TestAPIEndpointsRateLimiting" name="test_rate_limit_different_ips" time="0.030" /><testcase classname="unit.test_api_endpoints_auth.TestAPIEndpointsRateLimiting" name="test_rate_limit_time_window_reset" time="1.116" /><testcase classname="unit.test_api_endpoints_auth.TestAPIEndpointsRateLimiting" name="test_rate_limit_cleanup_mechanism" time="0.034" /><testcase classname="unit.test_api_endpoints_auth.TestSecurityHeaders" name="test_security_headers_present" time="0.017" /><testcase classname="unit.test_api_endpoints_auth.TestSecurityHeaders" name="test_server_header_masked" time="0.059" /><testcase classname="unit.test_api_endpoints_auth.TestSecurityHeaders" name="test_security_headers_on_error_responses" time="0.008" /><testcase classname="unit.test_api_endpoints_auth.TestAPIResponseValidation" name="test_unauthorized_response_format" time="0.008"><failure message="AssertionError: assert ('WWW-Authenticate' in Headers([('Content-Type', 'application/json'), ('Content-Length', '27'), ('X-Content-Type-Options', 'nosniff'), ('X-Frame-Options', 'DENY'), ('X-XSS-Protection', '1; mode=block'), ('Strict-Transport-Security', 'max-age=31536000; includeSubDomains'), ('Referrer-Policy', 'strict-origin-when-cross-origin'), ('Server', 'SyncScribeStudio-API/1.0')]) or 401 != 401)&#10; +  where Headers([('Content-Type', 'application/json'), ('Content-Length', '27'), ('X-Content-Type-Options', 'nosniff'), ('X-Frame-Options', 'DENY'), ('X-XSS-Protection', '1; mode=block'), ('Strict-Transport-Security', 'max-age=31536000; includeSubDomains'), ('Referrer-Policy', 'strict-origin-when-cross-origin'), ('Server', 'SyncScribeStudio-API/1.0')]) = &lt;WrapperTestResponse 27 bytes [401 UNAUTHORIZED]&gt;.headers&#10; +  and   401 = &lt;WrapperTestResponse 27 bytes [401 UNAUTHORIZED]&gt;.status_code">tests/unit/test_api_endpoints_auth.py:344: in test_unauthorized_response_format
    assert 'WWW-Authenticate' in response.headers or response.status_code != 401
E   AssertionError: assert ('WWW-Authenticate' in Headers([('Content-Type', 'application/json'), ('Content-Length', '27'), ('X-Content-Type-Options', 'nosniff'), ('X-Frame-Options', 'DENY'), ('X-XSS-Protection', '1; mode=block'), ('Strict-Transport-Security', 'max-age=31536000; includeSubDomains'), ('Referrer-Policy', 'strict-origin-when-cross-origin'), ('Server', 'SyncScribeStudio-API/1.0')]) or 401 != 401)
E    +  where Headers([('Content-Type', 'application/json'), ('Content-Length', '27'), ('X-Content-Type-Options', 'nosniff'), ('X-Frame-Options', 'DENY'), ('X-XSS-Protection', '1; mode=block'), ('Strict-Transport-Security', 'max-age=31536000; includeSubDomains'), ('Referrer-Policy', 'strict-origin-when-cross-origin'), ('Server', 'SyncScribeStudio-API/1.0')]) = &lt;WrapperTestResponse 27 bytes [401 UNAUTHORIZED]&gt;.headers
E    +  and   401 = &lt;WrapperTestResponse 27 bytes [401 UNAUTHORIZED]&gt;.status_code</failure></testcase><testcase classname="unit.test_api_endpoints_auth.TestAPIResponseValidation" name="test_rate_limit_response_format" time="0.007" /><testcase classname="unit.test_api_endpoints_auth.TestAPIResponseValidation" name="test_json_content_type_validation" time="0.047" /><testcase classname="unit.test_api_endpoints_auth.TestErrorHandling" name="test_missing_db_token_handling" time="0.009" /><testcase classname="unit.test_api_endpoints_auth.TestErrorHandling" name="test_authentication_error_logging" time="0.008"><failure message="AssertionError: assert (False or False)&#10; +  where False = &lt;MagicMock name='logger.warning' id='4785548192'&gt;.called&#10; +    where &lt;MagicMock name='logger.warning' id='4785548192'&gt; = &lt;MagicMock name='logger' id='4785539792'&gt;.warning&#10; +  and   False = &lt;MagicMock name='logger.error' id='4785547856'&gt;.called&#10; +    where &lt;MagicMock name='logger.error' id='4785547856'&gt; = &lt;MagicMock name='logger' id='4785539792'&gt;.error">tests/unit/test_api_endpoints_auth.py:411: in test_authentication_error_logging
    assert mock_logger.warning.called or mock_logger.error.called
E   AssertionError: assert (False or False)
E    +  where False = &lt;MagicMock name='logger.warning' id='4785548192'&gt;.called
E    +    where &lt;MagicMock name='logger.warning' id='4785548192'&gt; = &lt;MagicMock name='logger' id='4785539792'&gt;.warning
E    +  and   False = &lt;MagicMock name='logger.error' id='4785547856'&gt;.called
E    +    where &lt;MagicMock name='logger.error' id='4785547856'&gt; = &lt;MagicMock name='logger' id='4785539792'&gt;.error</failure></testcase></testsuite></testsuites>